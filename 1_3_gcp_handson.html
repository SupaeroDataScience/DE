
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Data Engineering class at ISAE-Supaero as part of the SDD program">
      
      
      
        <link rel="canonical" href="https://supaerodatascience.github.io/DE/1_3_gcp_handson.html">
      
      
        <link rel="prev" href="1_3_gcp_lecture.html">
      
      
        <link rel="next" href="1_4_containers.html">
      
      
      <link rel="icon" href="https://raw.githubusercontent.com/SupaeroDataScience/DE/master/src/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>TP - Data Engineering</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#google-cloud-platform-hands-on" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Data Engineering" class="md-header__button md-logo" aria-label="Data Engineering" data-md-component="logo">
      
  <img src="https://raw.githubusercontent.com/SupaeroDataScience/DE/master/src/favicon.ico" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Data Engineering
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              TP
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/SupaeroDataScience/DE" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    SupaeroDataScience/DE
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Data Engineering" class="md-nav__button md-logo" aria-label="Data Engineering" data-md-component="logo">
      
  <img src="https://raw.githubusercontent.com/SupaeroDataScience/DE/master/src/favicon.ico" alt="logo">

    </a>
    Data Engineering
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SupaeroDataScience/DE" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    SupaeroDataScience/DE
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Syllabus
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    DE Fundamentals
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            DE Fundamentals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ctf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CTF
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Data Storage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Data Storage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="0_1_databases.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="0_2_ETL.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ETL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="0_3_postgres.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PostgreSQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="0_4_project.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Data Computation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Data Computation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_1_overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cloud Computing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Cloud Computing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_2_cloud.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lectures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_2_setup_codespace.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TP
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Google Cloud Platform
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Google Cloud Platform
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_3_gcp_lecture.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    TP
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="1_3_gcp_handson.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    TP
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#0-abstract" class="md-nav__link">
    <span class="md-ellipsis">
      0. Abstract
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-create-your-gcp-account" class="md-nav__link">
    <span class="md-ellipsis">
      1. Create your GCP Account
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-reconnect-to-github-codespaces" class="md-nav__link">
    <span class="md-ellipsis">
      2. (re)connect to GitHub Codespaces
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. (re)connect to GitHub Codespaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#if-you-still-have-your-codespace-from-last-time" class="md-nav__link">
    <span class="md-ellipsis">
      If you still have your codespace from last time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-your-codespace-and-connect-to-it" class="md-nav__link">
    <span class="md-ellipsis">
      Create your codespace and connect to it
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-install-google-cloud-sdk-configure-the-shell" class="md-nav__link">
    <span class="md-ellipsis">
      3. Install Google Cloud SDK &amp; Configure the shell
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-my-first-google-compute-engine-instance" class="md-nav__link">
    <span class="md-ellipsis">
      4. My first Google Compute Engine Instance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. My first Google Compute Engine Instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4a-creating-my-vm-using-the-console-the-gui" class="md-nav__link">
    <span class="md-ellipsis">
      4a. Creating my VM using the console (the GUI)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4b-connecting-to-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      4b. Connecting to SSH
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4c-the-magic-of-redimensioning-vms" class="md-nav__link">
    <span class="md-ellipsis">
      4c. The magic of redimensioning VMs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4d-transfering-files-from-the-computer-or-codespaces-to-this-machine" class="md-nav__link">
    <span class="md-ellipsis">
      4d. Transfering files from the computer (or codespaces) to this machine
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4e-persistent-ssh-sessions-with-tmux" class="md-nav__link">
    <span class="md-ellipsis">
      4e. Persistent SSH sessions with TMUX
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-interacting-with-google-cloud-storage" class="md-nav__link">
    <span class="md-ellipsis">
      5. Interacting with Google Cloud Storage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-deep-learning-vm-ssh-and-port-forwarding" class="md-nav__link">
    <span class="md-ellipsis">
      6. Deep Learning VM, SSH and Port Forwarding
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Deep Learning VM, SSH and Port Forwarding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6a-deep-learning-vm" class="md-nav__link">
    <span class="md-ellipsis">
      6a. deep learning vm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6b-create-a-google-compute-engine-instance-using-the-command-line" class="md-nav__link">
    <span class="md-ellipsis">
      6b. create a google compute engine instance using the command line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6c-connect-with-ssh-to-this-machine-with-port-forwarding" class="md-nav__link">
    <span class="md-ellipsis">
      6c. connect with ssh to this machine with port forwarding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6d-run-jupyter-lab-on-the-gce-vm" class="md-nav__link">
    <span class="md-ellipsis">
      6d. Run jupyter lab on the GCE VM
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-end-to-end-example" class="md-nav__link">
    <span class="md-ellipsis">
      7. End to end example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-important-cleaning-up" class="md-nav__link">
    <span class="md-ellipsis">
      8. IMPORTANT : Cleaning up
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-optional-introduction-to-infrastructure-as-code" class="md-nav__link">
    <span class="md-ellipsis">
      9. Optional - Introduction to infrastructure as code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-optional-managed-database" class="md-nav__link">
    <span class="md-ellipsis">
      10. Optional - Managed Database
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Containers, Docker
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Containers, Docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_4_containers.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_4_docker_tp.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TP
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_5_be.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Google Cloud and Docker BE
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_6_conclusion.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recap Cloud & Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
        
          
          <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deployment BE
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_7">
            <span class="md-nav__icon md-icon"></span>
            Deployment BE
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_8_deployment.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_8_deployment_tp.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_8_deployment_tp_long.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TP (Version Longue)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="1_7_readings.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reading List
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Data Distribution
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Data Distribution
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_1_overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_5_mapreduce.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hadoop and MapReduce
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Orchestration & Kubernetes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Orchestration & Kubernetes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_2_orchestration.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lectures
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_3_kub_handson.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    TP
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_6_spark.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spark
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_8_dask.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dask on Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="2_9_project.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dask project
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#0-abstract" class="md-nav__link">
    <span class="md-ellipsis">
      0. Abstract
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-create-your-gcp-account" class="md-nav__link">
    <span class="md-ellipsis">
      1. Create your GCP Account
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-reconnect-to-github-codespaces" class="md-nav__link">
    <span class="md-ellipsis">
      2. (re)connect to GitHub Codespaces
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. (re)connect to GitHub Codespaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#if-you-still-have-your-codespace-from-last-time" class="md-nav__link">
    <span class="md-ellipsis">
      If you still have your codespace from last time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-your-codespace-and-connect-to-it" class="md-nav__link">
    <span class="md-ellipsis">
      Create your codespace and connect to it
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-install-google-cloud-sdk-configure-the-shell" class="md-nav__link">
    <span class="md-ellipsis">
      3. Install Google Cloud SDK &amp; Configure the shell
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-my-first-google-compute-engine-instance" class="md-nav__link">
    <span class="md-ellipsis">
      4. My first Google Compute Engine Instance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. My first Google Compute Engine Instance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4a-creating-my-vm-using-the-console-the-gui" class="md-nav__link">
    <span class="md-ellipsis">
      4a. Creating my VM using the console (the GUI)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4b-connecting-to-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      4b. Connecting to SSH
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4c-the-magic-of-redimensioning-vms" class="md-nav__link">
    <span class="md-ellipsis">
      4c. The magic of redimensioning VMs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4d-transfering-files-from-the-computer-or-codespaces-to-this-machine" class="md-nav__link">
    <span class="md-ellipsis">
      4d. Transfering files from the computer (or codespaces) to this machine
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4e-persistent-ssh-sessions-with-tmux" class="md-nav__link">
    <span class="md-ellipsis">
      4e. Persistent SSH sessions with TMUX
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-interacting-with-google-cloud-storage" class="md-nav__link">
    <span class="md-ellipsis">
      5. Interacting with Google Cloud Storage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-deep-learning-vm-ssh-and-port-forwarding" class="md-nav__link">
    <span class="md-ellipsis">
      6. Deep Learning VM, SSH and Port Forwarding
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Deep Learning VM, SSH and Port Forwarding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#6a-deep-learning-vm" class="md-nav__link">
    <span class="md-ellipsis">
      6a. deep learning vm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6b-create-a-google-compute-engine-instance-using-the-command-line" class="md-nav__link">
    <span class="md-ellipsis">
      6b. create a google compute engine instance using the command line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6c-connect-with-ssh-to-this-machine-with-port-forwarding" class="md-nav__link">
    <span class="md-ellipsis">
      6c. connect with ssh to this machine with port forwarding
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6d-run-jupyter-lab-on-the-gce-vm" class="md-nav__link">
    <span class="md-ellipsis">
      6d. Run jupyter lab on the GCE VM
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-end-to-end-example" class="md-nav__link">
    <span class="md-ellipsis">
      7. End to end example
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-important-cleaning-up" class="md-nav__link">
    <span class="md-ellipsis">
      8. IMPORTANT : Cleaning up
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-optional-introduction-to-infrastructure-as-code" class="md-nav__link">
    <span class="md-ellipsis">
      9. Optional - Introduction to infrastructure as code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-optional-managed-database" class="md-nav__link">
    <span class="md-ellipsis">
      10. Optional - Managed Database
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="google-cloud-platform-hands-on">Google Cloud Platform Hands-on<a class="headerlink" href="#google-cloud-platform-hands-on" title="Permanent link">ðŸ”—</a></h1>
<h2 id="0-abstract">0. Abstract<a class="headerlink" href="#0-abstract" title="Permanent link">ðŸ”—</a></h2>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<p>In this hands on you will configure your GCP account, the google cloud SDK and access the cloud console using Google Cloud Shell,
You will also discover a very useful tool, a managed jupyter notebook service from google named Google Colab which may be very important for your future developments this year</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Some things may only work on <strong>eduroam</strong> or in 4G...</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Don't forget to shutdown everything when you're done since it costs you money. At the end, even if you have not finished the TP, go to the section 8 "Cleaning Up"</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When the TP says to replace "{something}" with a name, don't include the brackets so write â€œyourname"</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are lost on where you are, normally the terminal has the hostname indicated, otherwise run the command <code>hostname</code></p>
</div>
<h2 id="1-create-your-gcp-account">1. Create your GCP Account<a class="headerlink" href="#1-create-your-gcp-account" title="Permanent link">ðŸ”—</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should have already done that last week</p>
</div>
<p>Here you will each create a Google Cloud Platform account and project using the student credits given this year,</p>
<p><a href="https://cloud.google.com/docs/overview">Overview link</a></p>
<ul>
<li>Create an account within <a href="https://console.cloud.google.com">Google cloud Platform</a> using your ISAE e-mail</li>
<li>Use the code given by Dennis to redeem your free credits</li>
<li>You should have a <a href="https://cloud.google.com/free">free tier</a> available to you as well as coupons</li>
<li>From <a href="https://console.cloud.google.com">the interface</a> you should <a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects">create a project</a> with a name of your choice (it is recommended to put for example sdd2425-yourname so that it is clear)</li>
</ul>
<h2 id="2-reconnect-to-github-codespaces">2. (re)connect to GitHub Codespaces<a class="headerlink" href="#2-reconnect-to-github-codespaces" title="Permanent link">ðŸ”—</a></h2>
<h3 id="if-you-still-have-your-codespace-from-last-time">If you still have your codespace from last time<a class="headerlink" href="#if-you-still-have-your-codespace-from-last-time" title="Permanent link">ðŸ”—</a></h3>
<p>If you go to the core page of <a href="https://github.com/codespaces">https://github.com/codespaces</a> and you see an existing codespace from last week, you can restart it using the (...) menu</p>
<p><img alt="img" src="slides/static/img/codespacemenu.png" /></p>
<p>If you don't have one, recreate it (see below)</p>
<h3 id="create-your-codespace-and-connect-to-it">Create your codespace and connect to it<a class="headerlink" href="#create-your-codespace-and-connect-to-it" title="Permanent link">ðŸ”—</a></h3>
<p>Go to <a href="https://github.com/fchouteau/isae-cloud-computing-codespace">https://github.com/fchouteau/isae-cloud-computing-codespace</a></p>
<p><img alt="img" src="slides/static/img/codespacefchouteau.png" /></p>
<ul>
<li>Click on the top left corner for a new codespace</li>
<li>It should launch a browser with a vscode</li>
<li>Launch a terminal using the top right menu</li>
</ul>
<p><strong>If that does not work,</strong> go to <a href="https://github.com/github/codespaces-blank">https://github.com/github/codespaces-blank</a> and create a codespace from there</p>
<p><img alt="img" src="slides/static/img/codespacesblank.png" /></p>
<p>You should arrive to a VScode instance</p>
<p><img alt="img" src="slides/static/img/codespacevscode.png" /></p>
<p>If you go to the core page of <a href="https://github.com/codespaces">https://github.com/codespaces</a> you should see your codespace running</p>
<p><img alt="img" src="slides/static/img/codespace.png" /></p>
<h2 id="3-install-google-cloud-sdk-configure-the-shell">3. Install Google Cloud SDK &amp; Configure the shell<a class="headerlink" href="#3-install-google-cloud-sdk-configure-the-shell" title="Permanent link">ðŸ”—</a></h2>
<p>If you want to interact with GCP from your computer or codespaces, you will need to install the <a href="https://cloud.google.com/sdk">Google Cloud SDK</a>, which will also install a shell if you are on windows</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you have a codespace cloned from <a href="https://github.com/fchouteau/isae-cloud-computing-codespace">mine</a>, the google cloud sdk is already installed. Try <code>gcloud</code>to check that, and skip this if this returns something</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can install the cloud shell locally, but I recommend using your <strong>codespace</strong></p>
</div>
<details>
<summary>Installing locally</summary>
<p>The best ways to interact with google cloud SDK is with a terminal so in that order:</p>
<ul>
<li>Ubuntu / Debian <a href="https://cloud.google.com/sdk/docs/install#deb">https://cloud.google.com/sdk/docs/install#deb</a></li>
<li>Other Linux (either VM or native): <a href="https://cloud.google.com/sdk/docs/install#linux">https://cloud.google.com/sdk/docs/install#linux</a></li>
<li>MacOS: <a href="https://cloud.google.com/sdk/docs/install#mac">https://cloud.google.com/sdk/docs/install#mac</a></li>
<li>Windows Subsystem for Linux: see Linux</li>
<li>Windows: <a href="https://cloud.google.com/sdk/docs/install#windows">https://cloud.google.com/sdk/docs/install#windows</a></li>
</ul>
</details>
<details>
<summary>Installing on codespace</summary>
<p>If you are on codespace, run the commands below to install the gcloud tool to your machine</p>
<p>Note : If you used the custom codespace, it should already be installed, try gcloud init directly</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb https://packages.cloud.google.com/apt cloud-sdk main&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>/etc/apt/sources.list.d/google-cloud-sdk.list
curl<span class="w"> </span>https://packages.cloud.google.com/apt/doc/apt-key.gpg<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>apt-key<span class="w"> </span>add<span class="w"> </span>-
sudo<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>google-cloud-cli
</code></pre></div>
</details>
<p>Then run <code>gcloud init</code> in your terminal to configure the <a href="https://cloud.google.com/sdk/docs/initializing">google cloud sdk</a> with your account</p>
<p>You should at some point see at terminal with a link. Click on the link and login with your google accound, then copy the token to your codespace.</p>
<p><img alt="logintoken" src="slides/static/img/login.png" /></p>
<p>Your github codespace is now configured with your google cloud platform credentials</p>
<h2 id="4-my-first-google-compute-engine-instance">4. My first Google Compute Engine Instance<a class="headerlink" href="#4-my-first-google-compute-engine-instance" title="Permanent link">ðŸ”—</a></h2>
<p>First, we will make our first steps by creating a compute engine instance (a vm) using the console, connecting to it via SSH, interacting with it, uploading some files, and we will shut it down and make the magic happen by resizing it</p>
<ul>
<li>What is <a href="https://cloud.google.com/compute/docs/concepts">google cloud compute engine ?</a> try to describe it with your own words</li>
</ul>
<h3 id="4a-creating-my-vm-using-the-console-the-gui">4a. Creating my VM using the console (the GUI)<a class="headerlink" href="#4a-creating-my-vm-using-the-console-the-gui" title="Permanent link">ðŸ”—</a></h3>
<ul>
<li>
<p>Create your VM from the google cloud interface : Go to <a href="https://cloud.google.com/compute/docs/instances/create-start-instance#startinstanceconsole">this link</a> and follow the "CONSOLE" instruction</p>
</li>
<li>
<p>Create an instance with the following parameters</p>
<ul>
<li>type: n1-standard-1</li>
<li>zone: europe-west1-b (Belgium)</li>
<li>os: ubuntu 22.04 x86</li>
<li>boot disk size: 10 Gb</li>
<li>boot disk type: pd-standard</li>
</ul>
</li>
<li>Give it a name of your choice (that you can remember)</li>
<li><strong>DO NOT SHUT IT DOWN</strong> for now</li>
</ul>
<details class="note">
<summary>Note</summary>
<p>If you were using the command line, you would have done this</p>
<div class="highlight"><pre><span></span><code>gcloud<span class="w"> </span>compute<span class="w"> </span>instances<span class="w"> </span>create<span class="w"> </span><span class="o">{</span>name<span class="o">}</span><span class="w"> </span>--project<span class="o">={</span>your-project<span class="o">}</span><span class="w"> </span>--zone<span class="o">={</span>your-zone<span class="o">}</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--machine-type<span class="o">=</span>n1-standard-1<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--image<span class="o">=</span>ubuntu-2204-jammy-v20231030<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--image-project<span class="o">=</span>ubuntu-os-cloud
<span class="w">  </span>--create-disk<span class="o">=</span>auto-delete<span class="o">=</span>yes,boot<span class="o">=</span>yes,device-name<span class="o">=</span>dev-instance-<span class="o">{</span>index<span class="o">}</span>,image<span class="o">=</span>projects/ubuntu-os-cloud/global/images/ubuntu-2204-jammy-v20231030,mode<span class="o">=</span>rw,size<span class="o">=</span><span class="m">10</span>,type<span class="o">=</span>projects/sdd2324/zones/<span class="o">{</span>your-zone<span class="o">}</span>/diskTypes/pd-standard<span class="w"> </span><span class="se">\</span>
</code></pre></div>
</details>
<h3 id="4b-connecting-to-ssh">4b. Connecting to SSH<a class="headerlink" href="#4b-connecting-to-ssh" title="Permanent link">ðŸ”—</a></h3>
<ul>
<li>
<p>Connect to ssh from the github codespace</p>
<details class="solution">
<summary>Solution</summary>
<p><code>gcloud compute ssh ${MACHINE-NAME}</code></p>
</details>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We are using <code>google compute ssh</code> instead of ssh. This is an automated tool that takes care of locating your machine in GCP and transferring the keys</p>
</div>
</li>
<li>
<p>Check available disk space</p>
<details class="solution">
<summary>Solution</summary>
<p><code>df -h</code></p>
</details>
</li>
<li>
<p>Check the OS name</p>
<details class="solution">
<summary>Solution</summary>
<p><code>cat /etc/os-release</code></p>
</details>
</li>
<li>
<p>Check the CPU model</p>
<details class="solution">
<summary>Solution</summary>
<p><code>cat /proc/cpuinfo</code></p>
</details>
</li>
<li>
<p>Check the number of cores available and the RAM</p>
<details class="solution">
<summary>Solution</summary>
<p><code>htop</code></p>
</details>
</li>
</ul>
<h3 id="4c-the-magic-of-redimensioning-vms">4c. The magic of redimensioning VMs<a class="headerlink" href="#4c-the-magic-of-redimensioning-vms" title="Permanent link">ðŸ”—</a></h3>
<ul>
<li>Shutdown the VM (from the web browser), check the previous codelab to see how to do it</li>
<li>Select it and click on EDIT</li>
<li>Change the machine type to <code>n1-standard-2</code> (<a href="https://cloud.google.com/compute/docs/instances/changing-machine-type-of-stopped-instance">link to documentation</a>)</li>
<li>Relaunch it, reconnect to it and try to check using <code>htop</code> the number of cores &amp; RAM available</li>
<li>Note : If you run <code>cat /proc/cpuinfo</code> again you will see that you are running on the same hardware !</li>
</ul>
<p>Magic isn't it ? </p>
<p>Note: If you had any files and specific configuration, they would still be here !</p>
<h3 id="4d-transfering-files-from-the-computer-or-codespaces-to-this-machine">4d. Transfering files from the computer (or codespaces) to this machine<a class="headerlink" href="#4d-transfering-files-from-the-computer-or-codespaces-to-this-machine" title="Permanent link">ðŸ”—</a></h3>
<ul>
<li>We will use the terminal to transfer some files <strong><em>from</em>* your computer (or codespaces) </strong>to** this machine,</li>
<li>
<p>If you use cloud shell you can do it as well : create a dummy file in cloud shell</p>
</li>
<li>
<p toc="toc">Follow <a href="https://cloud.google.com/compute/docs/instances/transfer-files#transfergcloud">this link</a> to learn how to use the gcloud cli tool to transfer files to your instance
 TOC</p>
</li>
<li>
<p>For experts, it's possible to do it manually using <a href="https://phoenixnap.com/kb/how-to-rsync-over-ssh">rsync from ssh</a> or <a href="https://cloud.google.com/compute/docs/instances/transfer-files#scp">scp</a></p>
</li>
<li>
<p>Transfer some files to your <code>/home/${USER}</code> directory</p>
</li>
<li>
<p>List them from your instance (<code>ls</code>)</p>
</li>
</ul>
<p>How do we do the opposite ?</p>
<p>See section 5.</p>
<h3 id="4e-persistent-ssh-sessions-with-tmux">4e. Persistent SSH sessions with TMUX<a class="headerlink" href="#4e-persistent-ssh-sessions-with-tmux" title="Permanent link">ðŸ”—</a></h3>
<ul>
<li>Connect to your GCE instance using SSH from the codespace</li>
<li>Question: What happens if you start a long computation and disconnect ?</li>
<li>Check that tmux is installed on the remote instance (run <code>tmux</code>). if not <a href="https://computingforgeeks.com/linux-tmux-cheat-sheet/">install it</a></li>
<li>Follow this tutorial: <a href="https://www.hamvocke.com/blog/a-quick-and-easy-guide-to-tmux/">https://www.hamvocke.com/blog/a-quick-and-easy-guide-to-tmux/</a></li>
<li>To check you have understood you should be able to:<ul>
<li>Connect to your remote instance with ssh</li>
<li>Start a tmux session</li>
<li>Launch a process (for example <code>htop</code>) inside it</li>
<li>Detach from the session (<code>CTRL+B</code> then type <code>:detach</code>)</li>
<li>Kill the ssh connection</li>
<li>Connect again</li>
<li><code>tmux attach</code> to your session</li>
<li>Your process should still be here !</li>
</ul>
</li>
</ul>
<p>Congratulations :)</p>
<h2 id="5-interacting-with-google-cloud-storage">5. Interacting with Google Cloud Storage<a class="headerlink" href="#5-interacting-with-google-cloud-storage" title="Permanent link">ðŸ”—</a></h2>
<p>Here we will discover google cloud storage, upload some files from your computer and download them from your instance in the cloud</p>
<ul>
<li>
<p>What is <a href="https://cloud.google.com/storage">Google Cloud Storage ?</a> Try to describe it with your own words</p>
</li>
<li>
<p>Use <a href="https://cloud.google.com/storage/docs/discover-object-storage-console">this tutorial</a> to upload something from your computer to google cloud storage from the web browser (<strong>DO NOT DELETE THE FILES YET</strong>)</p>
</li>
</ul>
<p>Now we will download it using the google cloud CLI tool. Here's <a href="https://cloud.google.com/storage/docs/uploading-objects#gsutil">the documentation</a></p>
<p>Follow the <a href="https://cloud.google.com/storage/docs/discover-object-storage-gsutil">tutorial</a> to learn how to do what you just did, but this time using <code>gsutil</code> from your codespace</p>
<ul>
<li>List the content of the bucket you just created (if you deleted it previously, create a new one)</li>
<li>Upload a file to a bucket </li>
<li>Download a file from a bucket</li>
</ul>
<p><strong>Optional : What if we want to do the same from the GCE instance ?</strong></p>
<ul>
<li>
<p>Now go back to your machine</p>
</li>
<li>
<p>Try to list bucket, download and upload files</p>
</li>
<li>
<p>Is it possible ?</p>
</li>
<li>
<p>If not, it's because you have to allow the instance to access google cloud storage</p>
</li>
<li>
<p>Shutdown the VM and edit it (like we did when we resized the instance)</p>
</li>
<li>
<p>Check "access scopes", select "set access for each api", and select "storage / admin"</p>
</li>
<li>
<p>Now restart you machine, connect back to it. You should be able to upload to google cloud storage now files now</p>
</li>
<li>
<p>You can delete the VM as well, we will not use it</p>
</li>
</ul>
<h2 id="6-deep-learning-vm-ssh-and-port-forwarding">6. Deep Learning VM, SSH and Port Forwarding<a class="headerlink" href="#6-deep-learning-vm-ssh-and-port-forwarding" title="Permanent link">ðŸ”—</a></h2>
<h3 id="6a-deep-learning-vm">6a. deep learning vm<a class="headerlink" href="#6a-deep-learning-vm" title="Permanent link">ðŸ”—</a></h3>
<p>Here we will use the google cloud sdk to create a more complex VM with a pre-installed image and connect to its jupyter server</p>
<p>Google Cloud Platform comes with a set of services targeted at data scientists called <a href="https://cloud.google.com/ai-platform">AI Platform</a>, among them are <a href="https://cloud.google.com/ai-platform/deep-learning-vm/docs">Deep Learning VMs</a> which are essentially preinstalled VMs (more or less the same configuration as google colab) with some bonuses.</p>
<ul>
<li>What are "Deep Learning VMs" ? Try to use your own words</li>
<li>What would be the alternative if you wanted to get a machine with the same installation ?</li>
</ul>
<h3 id="6b-create-a-google-compute-engine-instance-using-the-command-line">6b. create a google compute engine instance using the command line<a class="headerlink" href="#6b-create-a-google-compute-engine-instance-using-the-command-line" title="Permanent link">ðŸ”—</a></h3>
<p>Instead of using the browser to create this machine, we will be using the <a href="https://cloud.google.com/ai-platform/deep-learning-vm/docs/cli">CLI to create instances</a></p>
<div class="highlight"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">INSTANCE_NAME</span><span class="o">=</span><span class="s2">&quot;fch-dlvm-1&quot;</span><span class="w"> </span><span class="c1"># &lt;--- RENAME THIS !!!!!!!!!!</span>

gcloud<span class="w"> </span>compute<span class="w"> </span>instances<span class="w"> </span>create<span class="w"> </span><span class="nv">$INSTANCE_NAME</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--zone<span class="o">=</span><span class="s2">&quot;europe-west1-b&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--image-family<span class="o">=</span><span class="s2">&quot;common-cpu&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--image-project<span class="o">=</span><span class="s2">&quot;deeplearning-platform-release&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--maintenance-policy<span class="o">=</span><span class="s2">&quot;TERMINATE&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--scopes<span class="o">=</span><span class="s2">&quot;storage-rw&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--machine-type<span class="o">=</span><span class="s2">&quot;n1-standard-1&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--boot-disk-size<span class="o">=</span><span class="s2">&quot;50GB&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">        </span>--boot-disk-type<span class="o">=</span><span class="s2">&quot;pd-standard&quot;</span>
</code></pre></div>
<ul>
<li>Notice the similarities between the first VM you created and this one,</li>
<li>What changed ?</li>
<li>If you want to learn more about compute images, image families etc... <a href="https://cloud.google.com/ai-platform/deep-learning-vm/docs/concepts-images">go here</a></li>
</ul>
<h3 id="6c-connect-with-ssh-to-this-machine-with-port-forwarding">6c. connect with ssh to this machine with port forwarding<a class="headerlink" href="#6c-connect-with-ssh-to-this-machine-with-port-forwarding" title="Permanent link">ðŸ”—</a></h3>
<ul>
<li>
<p>Connect to your instance using the gcloud cli &amp; ssh from the codespace with port forwarding</p>
</li>
<li>
<p>Forward the port 8888 when you're connecting to the instance</p>
</li>
<li>
<p>Documentation <a href="https://cloud.google.com/ai-platform/deep-learning-vm/docs">forward some ports</a> as well</p>
</li>
</ul>
<details class="solution">
<summary>Solution</summary>
<p><code>gcloud compute ssh user@machine-name --zone=europe-west1-b -- -L 8888:localhost:8888</code></p>
</details>
<p>If you are in codespace, use the port forwarding utility, add a new port (8888). It may be done automatically.</p>
<ul>
<li>
<p>Explore the machine the same way we did previously</p>
</li>
<li>
<p>You can see you have a conda envirnoment installed. Try to query the list of things installed</p>
</li>
</ul>
<details class="solution">
<summary>Solution</summary>
<p><code>conda list</code>
<code>pip list</code></p>
</details>
<ul>
<li>is (py)torch installed ? If not, install it</li>
</ul>
<details class="solution">
<summary>Solution</summary>
<p><code>pip list | grep torch</code>
<code>pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu</code></p>
</details>
<h3 id="6d-run-jupyter-lab-on-the-gce-vm">6d. Run jupyter lab on the GCE VM<a class="headerlink" href="#6d-run-jupyter-lab-on-the-gce-vm" title="Permanent link">ðŸ”—</a></h3>
<ul>
<li>
<p>In the GCE VM, run <code>jupyter lab</code></p>
</li>
<li>
<p>Copy the credentials</p>
</li>
<li>
<p>Connect to the port 8888 of the GitHub CodeSpace. You should be redirected to a jupyter instance</p>
</li>
</ul>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Where are we ? Where is the jupyter lab hosted ?
What is the difference between this and the jupyter lab we launched from codespace last week ?</p>
</div>
<p><img alt="tunnels" src="slides/static/img/codespaceception.png" /></p>
<p>Don't disconnect from the VM, we will continue below</p>
<h2 id="7-end-to-end-example">7. End to end example<a class="headerlink" href="#7-end-to-end-example" title="Permanent link">ðŸ”—</a></h2>
<p>We will replicate the following setup (simplified)</p>
<p><img alt="setup" src="slides/static/img/gce_workflow.png" /></p>
<ul>
<li>Your development machine (the github codespace) has some training code</li>
<li>You have a "high performance" machine in the cloud</li>
<li>You want to transfer the training code to the VM</li>
<li>You want to run the training in a remote machine</li>
<li>
<p>Once the training is done you want to upload the model weights to google cloud storage</p>
</li>
<li>
<p>In your codespace, in a new folder (eg. <code>training</code>), copy the content of <a href="https://github.com/pytorch/examples/tree/main/mnist">this</a></p>
</li>
</ul>
<details class="solution">
<summary>Solution</summary>
<p><code>gcloud compute scp --recurse training ${USER}@{MACHINE}:/home/${USER}/</code></p>
</details>
<p>You should find it on your GCE VM</p>
<ul>
<li>Run it using <code>python train.py --epochs 1 --save-model</code>. </li>
</ul>
<p>It should train a neural network on the MNIST dataset. BONUS : Run it inside a tmux session ;)</p>
<ul>
<li>
<p>Once it has finished, you should see a new file, the model weights <code>mnist_cnn.pt</code></p>
</li>
<li>
<p>From the GCE VM : Upload the weights to the google cloud storage bucket you previously created</p>
</li>
</ul>
<details class="solution">
<summary>Solution</summary>
<p><code>gcloud storage cp mnist_cnn.pt gs://(...)</code></p>
</details>
<ul>
<li>From the GitHubCodespace : Download the model weights from google cloud storage</li>
</ul>
<details class="solution">
<summary>Solution</summary>
<p><code>gcloud storage cp gs://(...) mnist_cnn.pt</code></p>
</details>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>yay ! Don't forget to cleanup</p>
</div>
<h2 id="8-important-cleaning-up">8. IMPORTANT : Cleaning up<a class="headerlink" href="#8-important-cleaning-up" title="Permanent link">ðŸ”—</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul>
<li><strong>DELETE ALL THE BUCKES YOU CREATED</strong></li>
<li><strong>DELETE ALL THE GCP INSTANCES YOU CREATED</strong></li>
<li><strong>SHUTDOWN YOUR CODESPACE</strong></li>
</ul>
</div>
<p>How to shutdown codespaces :</p>
<p><img alt="stop" src="slides/static/img/stop.png" /></p>
<ul>
<li>Click on stop codespace to shut it down (you "pay" for the disk with your free credits)</li>
<li>Click on kill codespace to delete it</li>
</ul>
<h2 id="9-optional-introduction-to-infrastructure-as-code">9. Optional - Introduction to infrastructure as code<a class="headerlink" href="#9-optional-introduction-to-infrastructure-as-code" title="Permanent link">ðŸ”—</a></h2>
<ul>
<li>
<p><a href="https://cloud.google.com/deployment-manager/docs/quickstart">This tutorial</a> will guide you through google cloud deployment manager, which is a way to deploy google compute engine instances using configuration files</p>
</li>
<li>
<p>Don't forget to adapt machine configurations and zone to your use case (see above)</p>
</li>
</ul>
<p>If you run this, don't forget to clean everything up afterwards</p>
<h2 id="10-optional-managed-database">10. Optional - Managed Database<a class="headerlink" href="#10-optional-managed-database" title="Permanent link">ðŸ”—</a></h2>
<ul>
<li>
<p>I think you've just done a class on SQL databases</p>
</li>
<li>
<p>Here are the <a href="https://console.cloud.google.com/sql/instances">managed SQL services of google cloud</a></p>
</li>
</ul>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Can you describe what it is ?
What do you pay to google ? How much does it cost ?
What is a managed service in cloud vocabulary ?</p>
</div>
<ul>
<li>If you still have some code to interact with a database, you can try launching one here and redoing your classes</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["toc.autohide", "navigation.sections"], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>